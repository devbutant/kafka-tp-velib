<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Velib Stations Monitor</title>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <h1>Velib Stations Monitor</h1>
        <div id="stations"></div>

        <script>
            var socket = io.connect();
            socket.on("station_update", function (data) {
                var stationsDiv = document.getElementById("stations");
                var stationId =
                    "station_" + data.contract + "_" + data.station_number;
                var stationDiv = document.getElementById(stationId);
                if (!stationDiv) {
                    stationDiv = document.createElement("div");
                    stationDiv.id = stationId;
                    stationsDiv.appendChild(stationDiv);
                }
                stationDiv.innerHTML =
                    data.diff +
                    " " +
                    data.address +
                    " (" +
                    data.contract +
                    ") - Available Bike Stands: " +
                    data.available_bike_stands;
            });
        </script>
    </body>
</html>
